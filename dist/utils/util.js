'use strict';

var _api = require('./../api/api.js');

var _api2 = _interopRequireDefault(_api);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

//找出餐饮单品总价最低的
function getLowPrice(orderGoods) {
  var priceArray = [];
  orderGoods.forEach(function (item, index) {
    priceArray.push({
      id: item.id,
      money: Number(item.foodNum) * item.price
    });
  });
  return priceArray;
  // return Math.min.apply(null, priceArray)
}
//找出电商单品总价最低的
function getELowPrice(orderGoods) {
  var priceArray = [];
  orderGoods.forEach(function (item, index) {
    priceArray.push({
      id: item.good_id ? item.good_id : item.id,
      money: Number(item.quantity) * item.price
    });
  });
  return priceArray;
  // orderGoods.forEach((item,index)=>{
  //   priceArray.push((Number(item.quantity)*(item.price)).toFixed(2))
  // })
  // return Math.min.apply(null, priceArray)
}
/*获取当前页url*/
function getCurrentPageUrl() {
  var pages = getCurrentPages(); //获取加载的页面
  var currentPage = pages[pages.length - 1]; //获取当前页面的对象
  var url = currentPage.route; //当前页面url
  return url;
}
//将时间戳转换成日期格式
function timestampToTime(timestamp) {
  var date = new Date(timestamp * 1000); //时间戳为10位需*1000，时间戳为13位的话不需乘1000
  var Y = date.getFullYear() + '-';
  var M = (date.getMonth() + 1 < 10 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1) + '-';
  var D = date.getDate() + ' ';
  // var h = date.getHours() + ':';
  // var m = date.getMinutes() + ':';
  // var s = date.getSeconds();
  // return Y+M+D+h+'00';
  return Y + M + D;
}
function formatDate(time) {
  var datetime = new Date(time);
  var day = datetime.getDate() < 10 ? '0' + datetime.getDate() : datetime.getDate(),
      hour = datetime.getHours() < 10 ? '0' + datetime.getHours() : datetime.getHours(),
      min = datetime.getMinutes() < 10 ? '0' + datetime.getMinutes() : datetime.getMinutes(),
      sec = datetime.getSeconds() < 10 ? '0' + datetime.getSeconds() : datetime.getSeconds();
  return day + ':' + hour + ':' + min + ':' + sec;
}
//返回当前时间
function getCurrentTime() {
  var keep = '';
  var date = new Date();
  var y = date.getFullYear();
  var m = date.getMonth() + 1;
  m = m < 10 ? '0' + m : m;
  var d = date.getDate() < 10 ? '0' + date.getDate() : date.getDate();
  var h = date.getHours() < 10 ? '0' + date.getHours() : date.getHours();
  var f = date.getMinutes() < 10 ? '0' + date.getMinutes() : date.getMinutes();
  var s = date.getSeconds() < 10 ? '0' + date.getSeconds() : date.getSeconds();
  var rand = Math.round(Math.random() * 899 + 100);
  //keep = y + '' + m + '' + d + '' + h + '' + f + '' + s;
  keep = h;
  return keep; //20160614134947
}
//待支付页面需要的时间
function waitToPayGetCurrentTime() {
  var keep = '';
  var date = new Date();
  console.log(date);
  var y = date.getFullYear();
  var m = date.getMonth() + 1;
  m = m < 10 ? '0' + m : m;
  var d = date.getDate() < 10 ? '0' + date.getDate() : date.getDate();
  var h = date.getHours() < 10 ? '0' + date.getHours() : date.getHours();
  var f = date.getMinutes() < 10 ? '0' + date.getMinutes() : date.getMinutes();
  var s = date.getSeconds() < 10 ? '0' + date.getSeconds() : date.getSeconds();
  var rand = Math.round(Math.random() * 899 + 100);
  keep = y + '-' + m + '-' + d + ' ' + h + ':' + f + ':' + s;
  return keep; //20160614134947
}
// 生成随机数
function rnd(start, end) {
  return Math.floor(Math.random() * (end - start) + start);
}
//字符串截取
function sliceStr(str) {
  var strDone = str.slice(0, 10);
  if (strDone.length < 16) {
    strDone = strDone;
  } else {
    strDone = strDone + '...';
  }
  return strDone;
}
// 保留两位小数
function keepTwoDecimalFull(num) {
  var result = parseFloat(num);
  if (isNaN(result)) {
    return false;
  }
  result = Math.round(num * 100) / 100;
  var s_x = result.toString();
  var pos_decimal = s_x.indexOf('.');
  if (pos_decimal < 0) {
    pos_decimal = s_x.length;
    s_x += '.';
  }
  while (s_x.length <= pos_decimal + 2) {
    s_x += '0';
  }
  return s_x;
}

function objLength(input) {
  var type = toString(input);
  var length = 0;
  if (type != "[object Object]") {
    //throw "输入必须为对象{}！"
  } else {
    for (var key in input) {
      if (key != "number") {
        length++;
      }
    }
  }
  return length;
}
//验证是否是手机号码
function vailPhone(number) {
  var flag = false;
  var myreg = /^(((13[0-9]{1})|(14[0-9]{1})|(17[0-9]{1})|(15[0-3]{1})|(15[5-9]{1})|(18[0-9]{1}))+\d{8})$/;
  if (number.length != 11) {
    flag = flag;
  } else if (!myreg.test(number)) {
    flag = flag;
  } else {
    flag = true;
  }
  return flag;
}
//验证是否西班牙手机(6开头 9位数)
function ifSpanish(number) {
  var flag = false;
  var myreg = /^([6|7|9]{1}(\d+){8})$/;
  if (number.length != 9) {
    flag = flag;
  } else if (!myreg.test(number)) {
    flag = flag;
  } else {
    flag = true;
  }
  return flag;
}
//浮点型除法
function div(a, b) {
  var c,
      d,
      e = 0,
      f = 0;
  try {
    e = a.toString().split(".")[1].length;
  } catch (g) {}
  try {
    f = b.toString().split(".")[1].length;
  } catch (g) {}
  return c = Number(a.toString().replace(".", "")), d = Number(b.toString().replace(".", "")), mul(c / d, Math.pow(10, f - e));
}
//浮点型加法函数
function accAdd(arg1, arg2) {
  var r1, r2, m;
  try {
    r1 = arg1.toString().split(".")[1].length;
  } catch (e) {
    r1 = 0;
  }
  try {
    r2 = arg2.toString().split(".")[1].length;
  } catch (e) {
    r2 = 0;
  }
  m = Math.pow(10, Math.max(r1, r2));
  return ((arg1 * m + arg2 * m) / m).toFixed(2);
}
//浮点型乘法
function mul(a, b) {
  var c = 0,
      d = a.toString(),
      e = b.toString();
  try {
    c += d.split(".")[1].length;
  } catch (f) {}
  try {
    c += e.split(".")[1].length;
  } catch (f) {}
  return Number(d.replace(".", "")) * Number(e.replace(".", "")) / Math.pow(10, c);
}

// 遍历对象属性和值
function displayProp(obj) {
  var names = "";
  for (var name in obj) {
    names += name + obj[name];
  }
  return names;
}
// 去除字符串所有空格
function sTrim(text) {
  return text.replace(/\s/ig, '');
}
//去除所有:
function replaceMaohao(txt) {
  return txt.replace(/\:/ig, '');
}
//转换星星分数
function convertStarArray(score) {
  //1 全星,0 空星,2半星
  var arr = [];
  for (var i = 1; i <= 5; i++) {
    if (score >= i) {
      arr.push(1);
    } else if (score > i - 1 && score < i + 1) {
      arr.push(2);
    } else {
      arr.push(0);
    }
  }
  return arr;
}
function timePoint() {
  var timestamp = new Date().getTime();
  return timestamp;
}
// 添加时效性缓存
// function putStorage(k, v, t) {
//   wx.setStorageSync(k, v)
//   var seconds = parseInt(t);
//   if (seconds > 0) {
//     var timestamp = Date.parse(new Date());
//     timestamp = timestamp / 1000 + seconds;
//     wx.setStorageSync(k + dtime, timestamp + "")
//   } else {
//     wx.removeStorageSync(k + dtime)
//   }
// }

//获取时效性缓存
// function getStorage(k, def) {
//   var deadtime = parseInt(wx.getStorageSync(k + dtime))
//   if (deadtime) {
//     if (parseInt(deadtime) < Date.parse(new Date()) / 1000) {
//       if (def) { return def; } else { return; }
//     }
//   }
//   var res = wx.getStorageSync(k);
//   if (res) {
//     return res;
//   } else {
//     return def;
//   }
// }
module.exports = {
  getCurrentTime: getCurrentTime,
  objLength: objLength,
  displayProp: displayProp,
  sTrim: sTrim,
  replaceMaohao: replaceMaohao,
  vailPhone: vailPhone,
  ifSpanish: ifSpanish,
  div: div,
  mul: mul,
  accAdd: accAdd,
  convertStarArray: convertStarArray,
  rnd: rnd,
  sliceStr: sliceStr,
  keepTwoDecimalFull: keepTwoDecimalFull,
  waitToPayGetCurrentTime: waitToPayGetCurrentTime,
  timePoint: timePoint,
  formatDate: formatDate,
  getCurrentPageUrl: getCurrentPageUrl,
  timestampToTime: timestampToTime,
  getLowPrice: getLowPrice,
  getELowPrice: getELowPrice
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInV0aWwuanMiXSwibmFtZXMiOlsiZ2V0TG93UHJpY2UiLCJvcmRlckdvb2RzIiwicHJpY2VBcnJheSIsImZvckVhY2giLCJpdGVtIiwiaW5kZXgiLCJwdXNoIiwiaWQiLCJtb25leSIsIk51bWJlciIsImZvb2ROdW0iLCJwcmljZSIsImdldEVMb3dQcmljZSIsImdvb2RfaWQiLCJxdWFudGl0eSIsImdldEN1cnJlbnRQYWdlVXJsIiwicGFnZXMiLCJnZXRDdXJyZW50UGFnZXMiLCJjdXJyZW50UGFnZSIsImxlbmd0aCIsInVybCIsInJvdXRlIiwidGltZXN0YW1wVG9UaW1lIiwidGltZXN0YW1wIiwiZGF0ZSIsIkRhdGUiLCJZIiwiZ2V0RnVsbFllYXIiLCJNIiwiZ2V0TW9udGgiLCJEIiwiZ2V0RGF0ZSIsImZvcm1hdERhdGUiLCJ0aW1lIiwiZGF0ZXRpbWUiLCJkYXkiLCJob3VyIiwiZ2V0SG91cnMiLCJtaW4iLCJnZXRNaW51dGVzIiwic2VjIiwiZ2V0U2Vjb25kcyIsImdldEN1cnJlbnRUaW1lIiwia2VlcCIsInkiLCJtIiwiZCIsImgiLCJmIiwicyIsInJhbmQiLCJNYXRoIiwicm91bmQiLCJyYW5kb20iLCJ3YWl0VG9QYXlHZXRDdXJyZW50VGltZSIsImNvbnNvbGUiLCJsb2ciLCJybmQiLCJzdGFydCIsImVuZCIsImZsb29yIiwic2xpY2VTdHIiLCJzdHIiLCJzdHJEb25lIiwic2xpY2UiLCJrZWVwVHdvRGVjaW1hbEZ1bGwiLCJudW0iLCJyZXN1bHQiLCJwYXJzZUZsb2F0IiwiaXNOYU4iLCJzX3giLCJ0b1N0cmluZyIsInBvc19kZWNpbWFsIiwiaW5kZXhPZiIsIm9iakxlbmd0aCIsImlucHV0IiwidHlwZSIsImtleSIsInZhaWxQaG9uZSIsIm51bWJlciIsImZsYWciLCJteXJlZyIsInRlc3QiLCJpZlNwYW5pc2giLCJkaXYiLCJhIiwiYiIsImMiLCJlIiwic3BsaXQiLCJnIiwicmVwbGFjZSIsIm11bCIsInBvdyIsImFjY0FkZCIsImFyZzEiLCJhcmcyIiwicjEiLCJyMiIsIm1heCIsInRvRml4ZWQiLCJkaXNwbGF5UHJvcCIsIm9iaiIsIm5hbWVzIiwibmFtZSIsInNUcmltIiwidGV4dCIsInJlcGxhY2VNYW9oYW8iLCJ0eHQiLCJjb252ZXJ0U3RhckFycmF5Iiwic2NvcmUiLCJhcnIiLCJpIiwidGltZVBvaW50IiwiZ2V0VGltZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7O0FBQUE7Ozs7OztBQUNBO0FBQ0EsU0FBU0EsV0FBVCxDQUFxQkMsVUFBckIsRUFBZ0M7QUFDOUIsTUFBSUMsYUFBYSxFQUFqQjtBQUNBRCxhQUFXRSxPQUFYLENBQW1CLFVBQUNDLElBQUQsRUFBTUMsS0FBTixFQUFjO0FBQy9CSCxlQUFXSSxJQUFYLENBQWdCO0FBQ2RDLFVBQUdILEtBQUtHLEVBRE07QUFFZEMsYUFBT0MsT0FBT0wsS0FBS00sT0FBWixJQUFzQk4sS0FBS087QUFGcEIsS0FBaEI7QUFJRCxHQUxEO0FBTUEsU0FBT1QsVUFBUDtBQUNBO0FBQ0Q7QUFDRDtBQUNBLFNBQVNVLFlBQVQsQ0FBc0JYLFVBQXRCLEVBQWlDO0FBQy9CLE1BQUlDLGFBQWEsRUFBakI7QUFDQUQsYUFBV0UsT0FBWCxDQUFtQixVQUFDQyxJQUFELEVBQU1DLEtBQU4sRUFBYztBQUMvQkgsZUFBV0ksSUFBWCxDQUFnQjtBQUNkQyxVQUFHSCxLQUFLUyxPQUFMLEdBQWFULEtBQUtTLE9BQWxCLEdBQTBCVCxLQUFLRyxFQURwQjtBQUVkQyxhQUFPQyxPQUFPTCxLQUFLVSxRQUFaLElBQXVCVixLQUFLTztBQUZyQixLQUFoQjtBQUlELEdBTEQ7QUFNQSxTQUFPVCxVQUFQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDRDtBQUNEO0FBQ0EsU0FBU2EsaUJBQVQsR0FBNEI7QUFDMUIsTUFBSUMsUUFBUUMsaUJBQVosQ0FEMEIsQ0FDa0I7QUFDNUMsTUFBSUMsY0FBY0YsTUFBTUEsTUFBTUcsTUFBTixHQUFhLENBQW5CLENBQWxCLENBRjBCLENBRWtCO0FBQzVDLE1BQUlD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QUFyQkUsQ0FBakIiLCJmaWxlIjoidXRpbC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBhcGkgZnJvbSAnLi4vYXBpL2FwaSdcbi8v5om+5Ye66aSQ6aWu5Y2V5ZOB5oC75Lu35pyA5L2O55qEXG5mdW5jdGlvbiBnZXRMb3dQcmljZShvcmRlckdvb2RzKXtcbiAgbGV0IHByaWNlQXJyYXkgPSBbXTtcbiAgb3JkZXJHb29kcy5mb3JFYWNoKChpdGVtLGluZGV4KT0+e1xuICAgIHByaWNlQXJyYXkucHVzaCh7XG4gICAgICBpZDppdGVtLmlkLFxuICAgICAgbW9uZXk6KE51bWJlcihpdGVtLmZvb2ROdW0pKihpdGVtLnByaWNlKSlcbiAgICB9KVxuICB9KVxuICByZXR1cm4gcHJpY2VBcnJheTtcbiAgLy8gcmV0dXJuIE1hdGgubWluLmFwcGx5KG51bGwsIHByaWNlQXJyYXkpXG59XG4vL+aJvuWHuueUteWVhuWNleWTgeaAu+S7t+acgOS9jueahFxuZnVuY3Rpb24gZ2V0RUxvd1ByaWNlKG9yZGVyR29vZHMpe1xuICBsZXQgcHJpY2VBcnJheSA9IFtdO1xuICBvcmRlckdvb2RzLmZvckVhY2goKGl0ZW0saW5kZXgpPT57XG4gICAgcHJpY2VBcnJheS5wdXNoKHtcbiAgICAgIGlkOml0ZW0uZ29vZF9pZD9pdGVtLmdvb2RfaWQ6aXRlbS5pZCxcbiAgICAgIG1vbmV5OihOdW1iZXIoaXRlbS5xdWFudGl0eSkqKGl0ZW0ucHJpY2UpKVxuICAgIH0pXG4gIH0pXG4gIHJldHVybiBwcmljZUFycmF5O1xuICAvLyBvcmRlckdvb2RzLmZvckVhY2goKGl0ZW0saW5kZXgpPT57XG4gIC8vICAgcHJpY2VBcnJheS5wdXNoKChOdW1iZXIoaXRlbS5xdWFudGl0eSkqKGl0ZW0ucHJpY2UpKS50b0ZpeGVkKDIpKVxuICAvLyB9KVxuICAvLyByZXR1cm4gTWF0aC5taW4uYXBwbHkobnVsbCwgcHJpY2VBcnJheSlcbn1cbi8q6I635Y+W5b2T5YmN6aG1dXJsKi9cbmZ1bmN0aW9uIGdldEN1cnJlbnRQYWdlVXJsKCl7XG4gIGxldCBwYWdlcyA9IGdldEN1cnJlbnRQYWdlcygpICAgICAgICAgICAgICAgLy/ojrflj5bliqDovb3nmoTpobXpnaJcbiAgbGV0IGN1cnJlbnRQYWdlID0gcGFnZXNbcGFnZXMubGVuZ3RoLTFdICAgICAvL+iOt+WPluW9k+WJjemhtemdoueahOWvueixoVxuICBsZXQgdXJsID0gY3VycmVudFBhZ2Uucm91dGUgICAgICAgICAgICAgICAgIC8v5b2T5YmN6aG16Z2idXJsXG4gIHJldHVybiB1cmxcbn1cbi8v5bCG5pe26Ze05oiz6L2s5o2i5oiQ5pel5pyf5qC85byPXG5mdW5jdGlvbiB0aW1lc3RhbXBUb1RpbWUodGltZXN0YW1wKSB7XG4gIHZhciBkYXRlID0gbmV3IERhdGUodGltZXN0YW1wICogMTAwMCk7Ly/ml7bpl7TmiLPkuLoxMOS9jemcgCoxMDAw77yM5pe26Ze05oiz5Li6MTPkvY3nmoTor53kuI3pnIDkuZgxMDAwXG4gIHZhciBZID0gZGF0ZS5nZXRGdWxsWWVhcigpICsgJy0nO1xuICB2YXIgTSA9IChkYXRlLmdldE1vbnRoKCkrMSA8IDEwID8gJzAnKyhkYXRlLmdldE1vbnRoKCkrMSkgOiBkYXRlLmdldE1vbnRoKCkrMSkgKyAnLSc7XG4gIHZhciBEID0gZGF0ZS5nZXREYXRlKCkgKyAnICc7XG4gIC8vIHZhciBoID0gZGF0ZS5nZXRIb3VycygpICsgJzonO1xuICAvLyB2YXIgbSA9IGRhdGUuZ2V0TWludXRlcygpICsgJzonO1xuICAvLyB2YXIgcyA9IGRhdGUuZ2V0U2Vjb25kcygpO1xuICAvLyByZXR1cm4gWStNK0QraCsnMDAnO1xuICByZXR1cm4gWStNK0Q7XG59XG5mdW5jdGlvbiBmb3JtYXREYXRlKHRpbWUpIHtcbiAgdmFyIGRhdGV0aW1lID0gbmV3IERhdGUodGltZSk7IFxuICB2YXIgZGF5ID0gZGF0ZXRpbWUuZ2V0RGF0ZSgpIDwgMTAgPyAnMCcgKyBkYXRldGltZS5nZXREYXRlKCkgOiBkYXRldGltZS5nZXREYXRlKCksXG4gIGhvdXIgPSBkYXRldGltZS5nZXRIb3VycygpIDwgMTAgPyAnMCcgKyBkYXRldGltZS5nZXRIb3VycygpIDogZGF0ZXRpbWUuZ2V0SG91cnMoKSxcbiAgbWluID0gZGF0ZXRpbWUuZ2V0TWludXRlcygpIDwgMTAgPyAnMCcgKyBkYXRldGltZS5nZXRNaW51dGVzKCkgOiBkYXRldGltZS5nZXRNaW51dGVzKCksXG4gIHNlYyA9IGRhdGV0aW1lLmdldFNlY29uZHMoKSA8IDEwID8gJzAnICsgZGF0ZXRpbWUuZ2V0U2Vjb25kcygpIDogZGF0ZXRpbWUuZ2V0U2Vjb25kcygpO1xuICByZXR1cm4gZGF5ICsgJzonICsgaG91ciArICc6JyArIG1pbiArICc6JyArIHNlYztcbn1cbi8v6L+U5Zue5b2T5YmN5pe26Ze0XG5mdW5jdGlvbiBnZXRDdXJyZW50VGltZSgpIHtcbiAgdmFyIGtlZXAgPSAnJztcbiAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xuICB2YXIgeSA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgdmFyIG0gPSBkYXRlLmdldE1vbnRoKCkgKyAxO1xuICBtID0gbSA8IDEwID8gJzAnICsgbSA6IG07XG4gIHZhciBkID0gZGF0ZS5nZXREYXRlKCkgPCAxMCA/ICcwJyArIGRhdGUuZ2V0RGF0ZSgpIDogZGF0ZS5nZXREYXRlKCk7XG4gIHZhciBoID0gZGF0ZS5nZXRIb3VycygpIDwgMTAgPyAnMCcgKyBkYXRlLmdldEhvdXJzKCkgOiBkYXRlLmdldEhvdXJzKCk7XG4gIHZhciBmID0gZGF0ZS5nZXRNaW51dGVzKCkgPCAxMCA/ICcwJyArIGRhdGUuZ2V0TWludXRlcygpIDogZGF0ZS5nZXRNaW51dGVzKCk7XG4gIHZhciBzID0gZGF0ZS5nZXRTZWNvbmRzKCkgPCAxMCA/ICcwJyArIGRhdGUuZ2V0U2Vjb25kcygpIDogZGF0ZS5nZXRTZWNvbmRzKCk7XG4gIHZhciByYW5kID0gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogODk5ICsgMTAwKTtcbiAgLy9rZWVwID0geSArICcnICsgbSArICcnICsgZCArICcnICsgaCArICcnICsgZiArICcnICsgcztcbiAga2VlcCA9IGg7XG4gIHJldHVybiBrZWVwOyAvLzIwMTYwNjE0MTM0OTQ3XG59XG4vL+W+heaUr+S7mOmhtemdoumcgOimgeeahOaXtumXtFxuZnVuY3Rpb24gd2FpdFRvUGF5R2V0Q3VycmVudFRpbWUoKSB7XG4gIHZhciBrZWVwID0gJyc7XG4gIHZhciBkYXRlID0gbmV3IERhdGUoKTtcbiAgY29uc29sZS5sb2coZGF0ZSk7XG4gIHZhciB5ID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xuICB2YXIgbSA9IGRhdGUuZ2V0TW9udGgoKSArIDE7XG4gIG0gPSBtIDwgMTAgPyAnMCcgKyBtIDogbTtcbiAgdmFyIGQgPSBkYXRlLmdldERhdGUoKSA8IDEwID8gJzAnICsgZGF0ZS5nZXREYXRlKCkgOiBkYXRlLmdldERhdGUoKTtcbiAgdmFyIGggPSBkYXRlLmdldEhvdXJzKCkgPCAxMCA/ICcwJyArIGRhdGUuZ2V0SG91cnMoKSA6IGRhdGUuZ2V0SG91cnMoKTtcbiAgdmFyIGYgPSBkYXRlLmdldE1pbnV0ZXMoKSA8IDEwID8gJzAnICsgZGF0ZS5nZXRNaW51dGVzKCkgOiBkYXRlLmdldE1pbnV0ZXMoKTtcbiAgdmFyIHMgPSBkYXRlLmdldFNlY29uZHMoKSA8IDEwID8gJzAnICsgZGF0ZS5nZXRTZWNvbmRzKCkgOiBkYXRlLmdldFNlY29uZHMoKTtcbiAgdmFyIHJhbmQgPSBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiA4OTkgKyAxMDApO1xuICBrZWVwID0geSArICctJyArIG0gKyAnLScgKyBkICsgJyAnICsgaCArICc6JyArIGYgKyAnOicgKyBzO1xuICByZXR1cm4ga2VlcDsgLy8yMDE2MDYxNDEzNDk0N1xufVxuLy8g55Sf5oiQ6ZqP5py65pWwXG5mdW5jdGlvbiBybmQoc3RhcnQsIGVuZCl7XG4gIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoZW5kIC0gc3RhcnQpICsgc3RhcnQpO1xufVxuLy/lrZfnrKbkuLLmiKrlj5ZcbmZ1bmN0aW9uIHNsaWNlU3RyKHN0cil7XG4gIHZhciBzdHJEb25lID0gc3RyLnNsaWNlKDAsMTApO1xuICBpZihzdHJEb25lLmxlbmd0aCA8IDE2KXtcbiAgICBzdHJEb25lID0gc3RyRG9uZTtcbiAgfWVsc2V7XG4gICAgc3RyRG9uZSA9IHN0ckRvbmUgKyAnLi4uJztcbiAgfVxuICByZXR1cm4gc3RyRG9uZTtcbn1cbi8vIOS/neeVmeS4pOS9jeWwj+aVsFxuZnVuY3Rpb24ga2VlcFR3b0RlY2ltYWxGdWxsKG51bSkge1xuICB2YXIgcmVzdWx0ID0gcGFyc2VGbG9hdChudW0pO1xuICBpZiAoaXNOYU4ocmVzdWx0KSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXN1bHQgPSBNYXRoLnJvdW5kKG51bSAqIDEwMCkgLyAxMDA7XG4gIHZhciBzX3ggPSByZXN1bHQudG9TdHJpbmcoKTtcbiAgdmFyIHBvc19kZWNpbWFsID0gc194LmluZGV4T2YoJy4nKTtcbiAgaWYgKHBvc19kZWNpbWFsIDwgMCkge1xuICAgIHBvc19kZWNpbWFsID0gc194Lmxlbmd0aDtcbiAgICBzX3ggKz0gJy4nO1xuICB9XG4gIHdoaWxlIChzX3gubGVuZ3RoIDw9IHBvc19kZWNpbWFsICsgMikge1xuICAgIHNfeCArPSAnMCc7XG4gIH1cbiAgcmV0dXJuIHNfeDtcbn1cblxuZnVuY3Rpb24gb2JqTGVuZ3RoKGlucHV0KSB7XG4gIHZhciB0eXBlID0gdG9TdHJpbmcoaW5wdXQpO1xuICB2YXIgbGVuZ3RoID0gMDtcbiAgaWYgKHR5cGUgIT0gXCJbb2JqZWN0IE9iamVjdF1cIikge1xuICAgIC8vdGhyb3cgXCLovpPlhaXlv4XpobvkuLrlr7nosaF7fe+8gVwiXG4gIH0gZWxzZSB7XG4gICAgZm9yICh2YXIga2V5IGluIGlucHV0KSB7XG4gICAgICBpZiAoa2V5ICE9IFwibnVtYmVyXCIpIHtcbiAgICAgICAgbGVuZ3RoKys7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBsZW5ndGg7XG59XG4vL+mqjOivgeaYr+WQpuaYr+aJi+acuuWPt+eggVxuZnVuY3Rpb24gdmFpbFBob25lKG51bWJlcikge1xuICBsZXQgZmxhZyA9IGZhbHNlO1xuICBsZXQgbXlyZWcgPSAvXigoKDEzWzAtOV17MX0pfCgxNFswLTldezF9KXwoMTdbMC05XXsxfSl8KDE1WzAtM117MX0pfCgxNVs1LTldezF9KXwoMThbMC05XXsxfSkpK1xcZHs4fSkkLztcbiAgaWYgKG51bWJlci5sZW5ndGggIT0gMTEpIHtcbiAgICBmbGFnID0gZmxhZztcbiAgfWVsc2UgaWYgKCFteXJlZy50ZXN0KG51bWJlcikpIHtcbiAgICBmbGFnID0gZmxhZztcbiAgfWVsc2V7XG4gICAgZmxhZyA9IHRydWU7XG4gIH1cbiAgcmV0dXJuIGZsYWc7XG59XG4vL+mqjOivgeaYr+WQpuilv+ePreeJmeaJi+acuig25byA5aS0IDnkvY3mlbApXG5mdW5jdGlvbiBpZlNwYW5pc2gobnVtYmVyKSB7XG4gIGxldCBmbGFnID0gZmFsc2U7XG4gIGxldCBteXJlZyA9IC9eKFs2fDd8OV17MX0oXFxkKyl7OH0pJC87XG4gIGlmIChudW1iZXIubGVuZ3RoICE9IDkpIHtcbiAgICBmbGFnID0gZmxhZztcbiAgfSBlbHNlIGlmICghbXlyZWcudGVzdChudW1iZXIpKSB7XG4gICAgZmxhZyA9IGZsYWc7XG4gIH0gZWxzZSB7XG4gICAgZmxhZyA9IHRydWU7XG4gIH1cbiAgcmV0dXJuIGZsYWc7XG59XG4vL+a1rueCueWei+mZpOazlVxuZnVuY3Rpb24gZGl2KGEsIGIpIHtcbiAgdmFyIGMsIGQsIGUgPSAwLFxuICAgIGYgPSAwO1xuICB0cnkge1xuICAgIGUgPSBhLnRvU3RyaW5nKCkuc3BsaXQoXCIuXCIpWzFdLmxlbmd0aDtcbiAgfSBjYXRjaCAoZykgeyB9XG4gIHRyeSB7XG4gICAgZiA9IGIudG9TdHJpbmcoKS5zcGxpdChcIi5cIilbMV0ubGVuZ3RoO1xuICB9IGNhdGNoIChnKSB7IH1cbiAgcmV0dXJuIGMgPSBOdW1iZXIoYS50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKSwgZCA9IE51bWJlcihiLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpLCBtdWwoYyAvIGQsIE1hdGgucG93KDEwLCBmIC0gZSkpO1xufVxuLy/mta7ngrnlnovliqDms5Xlh73mlbBcbmZ1bmN0aW9uIGFjY0FkZChhcmcxLCBhcmcyKSB7XG4gIHZhciByMSwgcjIsIG07XG4gIHRyeSB7XG4gICAgcjEgPSBhcmcxLnRvU3RyaW5nKCkuc3BsaXQoXCIuXCIpWzFdLmxlbmd0aDtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHIxID0gMDtcbiAgfVxuICB0cnkge1xuICAgIHIyID0gYXJnMi50b1N0cmluZygpLnNwbGl0KFwiLlwiKVsxXS5sZW5ndGg7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByMiA9IDA7XG4gIH1cbiAgbSA9IE1hdGgucG93KDEwLCBNYXRoLm1heChyMSwgcjIpKTtcbiAgcmV0dXJuICgoYXJnMSAqIG0gKyBhcmcyICogbSkgLyBtKS50b0ZpeGVkKDIpO1xufVxuLy/mta7ngrnlnovkuZjms5VcbmZ1bmN0aW9uIG11bChhLCBiKSB7XG4gIHZhciBjID0gMCxcbiAgICBkID0gYS50b1N0cmluZygpLFxuICAgIGUgPSBiLnRvU3RyaW5nKCk7XG4gIHRyeSB7XG4gICAgYyArPSBkLnNwbGl0KFwiLlwiKVsxXS5sZW5ndGg7XG4gIH0gY2F0Y2ggKGYpIHsgfVxuICB0cnkge1xuICAgIGMgKz0gZS5zcGxpdChcIi5cIilbMV0ubGVuZ3RoO1xuICB9IGNhdGNoIChmKSB7IH1cbiAgcmV0dXJuIE51bWJlcihkLnJlcGxhY2UoXCIuXCIsIFwiXCIpKSAqIE51bWJlcihlLnJlcGxhY2UoXCIuXCIsIFwiXCIpKSAvIE1hdGgucG93KDEwLCBjKTtcbn1cblxuLy8g6YGN5Y6G5a+56LGh5bGe5oCn5ZKM5YC8XG5mdW5jdGlvbiBkaXNwbGF5UHJvcChvYmopIHtcbiAgdmFyIG5hbWVzID0gXCJcIjtcbiAgZm9yICh2YXIgbmFtZSBpbiBvYmopIHtcbiAgICBuYW1lcyArPSBuYW1lICsgb2JqW25hbWVdO1xuICB9XG4gIHJldHVybiBuYW1lcztcbn1cbi8vIOWOu+mZpOWtl+espuS4suaJgOacieepuuagvFxuZnVuY3Rpb24gc1RyaW0odGV4dCkge1xuICByZXR1cm4gdGV4dC5yZXBsYWNlKC9cXHMvaWcsICcnKVxufVxuLy/ljrvpmaTmiYDmnIk6XG5mdW5jdGlvbiByZXBsYWNlTWFvaGFvKHR4dCkge1xuICByZXR1cm4gdHh0LnJlcGxhY2UoL1xcOi9pZywgJycpXG59XG4vL+i9rOaNouaYn+aYn+WIhuaVsFxuZnVuY3Rpb24gY29udmVydFN0YXJBcnJheShzY29yZSkge1xuICAvLzEg5YWo5pifLDAg56m65pifLDLljYrmmJ9cbiAgdmFyIGFyciA9IFtdXG4gIGZvciAodmFyIGkgPSAxOyBpIDw9IDU7IGkrKykge1xuICAgIGlmIChzY29yZSA+PSBpKSB7XG4gICAgICBhcnIucHVzaCgxKVxuICAgIH0gZWxzZSBpZiAoc2NvcmUgPiBpLTEgJiYgc2NvcmUgPCBpICsgMSkge1xuICAgICAgYXJyLnB1c2goMilcbiAgICB9IGVsc2Uge1xuICAgICAgYXJyLnB1c2goMClcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGFycjtcbn1cbmZ1bmN0aW9uIHRpbWVQb2ludCgpe1xuICB2YXIgdGltZXN0YW1wPW5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICByZXR1cm4gdGltZXN0YW1wO1xufVxuLy8g5re75Yqg5pe25pWI5oCn57yT5a2YXG4vLyBmdW5jdGlvbiBwdXRTdG9yYWdlKGssIHYsIHQpIHtcbi8vICAgd3guc2V0U3RvcmFnZVN5bmMoaywgdilcbi8vICAgdmFyIHNlY29uZHMgPSBwYXJzZUludCh0KTtcbi8vICAgaWYgKHNlY29uZHMgPiAwKSB7XG4vLyAgICAgdmFyIHRpbWVzdGFtcCA9IERhdGUucGFyc2UobmV3IERhdGUoKSk7XG4vLyAgICAgdGltZXN0YW1wID0gdGltZXN0YW1wIC8gMTAwMCArIHNlY29uZHM7XG4vLyAgICAgd3guc2V0U3RvcmFnZVN5bmMoayArIGR0aW1lLCB0aW1lc3RhbXAgKyBcIlwiKVxuLy8gICB9IGVsc2Uge1xuLy8gICAgIHd4LnJlbW92ZVN0b3JhZ2VTeW5jKGsgKyBkdGltZSlcbi8vICAgfVxuLy8gfVxuXG4vL+iOt+WPluaXtuaViOaAp+e8k+WtmFxuLy8gZnVuY3Rpb24gZ2V0U3RvcmFnZShrLCBkZWYpIHtcbi8vICAgdmFyIGRlYWR0aW1lID0gcGFyc2VJbnQod3guZ2V0U3RvcmFnZVN5bmMoayArIGR0aW1lKSlcbi8vICAgaWYgKGRlYWR0aW1lKSB7XG4vLyAgICAgaWYgKHBhcnNlSW50KGRlYWR0aW1lKSA8IERhdGUucGFyc2UobmV3IERhdGUoKSkgLyAxMDAwKSB7XG4vLyAgICAgICBpZiAoZGVmKSB7IHJldHVybiBkZWY7IH0gZWxzZSB7IHJldHVybjsgfVxuLy8gICAgIH1cbi8vICAgfVxuLy8gICB2YXIgcmVzID0gd3guZ2V0U3RvcmFnZVN5bmMoayk7XG4vLyAgIGlmIChyZXMpIHtcbi8vICAgICByZXR1cm4gcmVzO1xuLy8gICB9IGVsc2Uge1xuLy8gICAgIHJldHVybiBkZWY7XG4vLyAgIH1cbi8vIH1cbm1vZHVsZS5leHBvcnRzID0ge1xuICBnZXRDdXJyZW50VGltZTogZ2V0Q3VycmVudFRpbWUsXG4gIG9iakxlbmd0aDogb2JqTGVuZ3RoLFxuICBkaXNwbGF5UHJvcDogZGlzcGxheVByb3AsXG4gIHNUcmltOiBzVHJpbSxcbiAgcmVwbGFjZU1hb2hhbzogcmVwbGFjZU1hb2hhbyxcbiAgdmFpbFBob25lOiB2YWlsUGhvbmUsXG4gIGlmU3BhbmlzaDogaWZTcGFuaXNoLFxuICBkaXY6IGRpdixcbiAgbXVsOiBtdWwsXG4gIGFjY0FkZDogYWNjQWRkLFxuICBjb252ZXJ0U3RhckFycmF5OiBjb252ZXJ0U3RhckFycmF5LFxuICBybmQ6cm5kLFxuICBzbGljZVN0cjpzbGljZVN0cixcbiAga2VlcFR3b0RlY2ltYWxGdWxsOmtlZXBUd29EZWNpbWFsRnVsbCxcbiAgd2FpdFRvUGF5R2V0Q3VycmVudFRpbWU6d2FpdFRvUGF5R2V0Q3VycmVudFRpbWUsXG4gIHRpbWVQb2ludDp0aW1lUG9pbnQsXG4gIGZvcm1hdERhdGU6Zm9ybWF0RGF0ZSxcbiAgZ2V0Q3VycmVudFBhZ2VVcmw6Z2V0Q3VycmVudFBhZ2VVcmwsXG4gIHRpbWVzdGFtcFRvVGltZTp0aW1lc3RhbXBUb1RpbWUsXG4gIGdldExvd1ByaWNlOmdldExvd1ByaWNlLFxuICBnZXRFTG93UHJpY2U6Z2V0RUxvd1ByaWNlXG59XG4iXX0=